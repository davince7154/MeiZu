"use strict";$(function(){var imgCode,captcha=new Captcha({lineWidth:1,lineNum:2,preGroundColor:[10,80],backGroundColor:[120,250],fontSize:40,fontFamily:["Georgia","微软雅黑","Helvetica","Arial"],fontStyle:"stroke",content:"0123456789",length:4});captcha.draw(document.querySelector("#captcha"),function(e){imgCode=e,$("#image-code").trigger("blur")}),$("#userphone").val(13245678910),$("#password").val("123asd"),$("#password2").val("123asd");var regObj={userphone:{regJs:"/^1[3-9]\\d{9}$/.test(val)",msg:"电话号码格式错误，请重新填写",isNull:"电话号码不能为空，请填写"},password:{regJs:"/^\\w{6,12}$/.test(val)",msg:"密码格式错误，请重新填写",isNull:"密码不能为空，请填写"},"image-code":{regJs:"val === imgCode",msg:"验证码填写错误，请重新填写",isNull:"验证码不能为空，请填写"}};$("form[name=loginForm] input[type=text],input[type=password]").blur(function(){var val=$.trim($(this).val()),domId=$(this).attr("id");""===$(this).val()?($(this).next().text(regObj[domId].isNull),$(this).addClass("active")):eval(regObj[domId].regJs)?($(this).next().text(""),$(this).removeClass("active")):($(this).next().text(regObj[domId].msg),$(this).addClass("active"))}),$("#loginBtn").click(function(){var e;0===$("form[name=regForm]").find(".active").length&&(e={userphone:$("#userphone").val(),userpass:md5($("#password").val()).slice(0,15)},$.ajax({data:e,url:"../server/login.php",dataType:"json",type:"post"}).done(function(e){var t,a,s;"success"===e.status?(t=new Cookie,$("#checkbox").prop("checked")?t.setCookie("user",$("#userphone").val(),7):t.setCookie("user",$("#userphone").val()),a=3,$("h3").css("font-size","18px").text("登录成功，".concat(a,"秒后跳转主页")),s=setInterval(function(){a--,$("h3").text("登录成功，".concat(a,"秒后跳转主页")),0==a&&(location.href="index.html",clearInterval(s),s=null)},1e3)):(alert(e.msg),$("#captcha").trigger("click"),$("#password").val(""))}))})});