"use strict";function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}function _createClass(i,t,e){return t&&_defineProperties(i.prototype,t),e&&_defineProperties(i,e),i}var Banner=function(){function o(i){_classCallCheck(this,o);var t={imgs:null,dom:null,moveTime:300,cutTime:1e3,userDom:null,navDom:null,carDom:null};for(var e in i)this[e]=null==i[e]?t[e]:i[e];this.index=0,this.cutTimer=null,this.moveTimer=null,this.addDom(),this.addEvent()}return _createClass(o,[{key:"addDom",value:function(){var i='<a href=""><img src="'.concat(this.imgs[this.imgs.length-1].image,'"alt="" data-isWhite="').concat(this.imgs[this.imgs.length-1].isWhite,'"></a>');i+=this.imgs.map(function(i){return'<a href=""><img src="'.concat(i.image,'"alt="" data-isWhite="').concat(i.isWhite,'"></a>')}).join("")+'<a href=""><img src="'.concat(this.imgs[0].image,'"alt="" data-isWhite="').concat(this.imgs[0].isWhite,'"></a>'),this.imgBox=$('<div class="banner-content">'.concat(i,"</div>")),this.imgBox.css({width:100*(this.imgs.length+2)+"%"}),this.imgBox.find("a").css("width",1/(this.imgs.length+2)*100+"%"),this.imgBox.appendTo(this.dom);var t=this.imgs.map(function(i){return"<p></p>"}).join("");this.douBox=$('<div class="dou-list">'.concat(t,"</div>")),this.douBox.appendTo(this.dom),this.jiantouL=$('<div class="jiantou jiantouL"><em class="iconfont icon-left"></em></div>'),this.jiantouR=$('<div class="jiantou jiantouR"><em class="iconfont icon-left"></em></div>'),this.jiantouL.appendTo(this.dom),this.jiantouR.appendTo(this.dom),this.douBox.children().eq(0).css({"background-color":"transparent","border-color":this.imgBox.find("img").eq(1).data("iswhite")?"#fff":"#666"}),this.navDom.css({color:this.imgBox.find("img").eq(1).data("iswhite")?"#fff":"#666"}),this.carDom.css({color:this.imgBox.find("img").eq(1).data("iswhite")?"#fff":"#666"}),this.isLogin||this.userDom.prop("src",this.imgBox.find("img").eq(1).data("iswhite")?this.whiteUser:this.blackUser)}},{key:"moveFn",value:function(){var i=this,t=this.imgBox.find("img").eq(this.index+1).data("iswhite");this.navDom.css({color:t?"#fff":"#666"}),this.carDom.css({color:t?"#fff":"#666"}),this.isLogin||this.userDom.prop("src",t?this.whiteUser:this.blackUser);var e=parseInt(this.dom.width());this.imgBox.animate({left:"-".concat(e*(this.index+1),"px")},this.moveTime,function(){parseInt(i.imgBox.css("left"))<-e*i.imgs.length?i.imgBox.css("left","-".concat(e,"px")):parseInt(i.imgBox.css("left"))>-e&&i.imgBox.css("left","-".concat(i.imgs.length*e,"px")),i.index>=i.imgs.length?i.index=0:i.index<0&&(i.index=i.imgs.length-1),i.douBox.children().eq(i.index).css({"background-color":"transparent","border-color":t?"#fff":"#666"}).siblings().css({"background-color":t?"#fff":"#666","border-color":t?"#fff":"#666"})})}},{key:"autoPlay",value:function(){var i=this;this.cutTimer||(this.cutTimer=setInterval(function(){i.index+=1,i.moveFn()},this.cutTime))}},{key:"stopPlay",value:function(){clearInterval(this.cutTimer),this.cutTimer=null}},{key:"addEvent",value:function(){var i=this;this.autoPlay(),window.onblur=function(){i.stopPlay()},window.onfocus=function(){i.autoPlay()},this.dom.mouseover(function(){i.stopPlay()}),this.dom.mouseleave(function(){i.autoPlay()}),this.navDom.mouseover(function(){i.stopPlay()}),this.jiantouR.click(function(){i.moveTimer||(i.index+=1,i.moveFn(),i.moveTimer=setTimeout(function(){clearTimeout(i.moveTimer),i.moveTimer=null},i.moveTime+100))}),this.jiantouL.click(function(){i.moveTimer||(--i.index,i.moveFn(),i.moveTimer=setTimeout(function(){clearTimeout(i.moveTimer),i.moveTimer=null},i.moveTime+100))});var t=this;this.douBox.children().click(function(){t.index=$(this).index(),t.moveFn()})}}]),o}();